(this["webpackJsonpusers-and-posts-localstorage-save"]=this["webpackJsonpusers-and-posts-localstorage-save"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(15),o=n.n(r),i=(n(42),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),r(e),o(e)}))}),u=(n(43),n(8)),a=n(4),l=n(12),d=n(33),j=n.n(d).a.create({baseURL:"https://jsonplaceholder.typicode.com/"}),h=function(){return j.get("posts")},f=function(){return j.get("users")},O=function(e){return j.get("posts?userId=".concat(e))},b=function(e){return j.get("posts/".concat(e,"/comments"))},S=function(e,t){return{type:"USERS/CHANGE-USER-STATUS",id:e,isChecked:t}},g=function(e){return function(t){O(e).then((function(e){t({type:"FILTERED-POSTS/GET-POSTS-BY-USER",posts:e.data})})).catch((function(e){console.log(e)}))}},p=n(75),E=n(74),T=n(2);var v=function(){var e=Object(u.b)();Object(c.useEffect)((function(){e((function(e){h().then((function(t){e({type:"ALL-POSTS/GET-POSTS",posts:t.data})})).catch((function(e){console.log(e.message)}))})),localStorage.getItem("localUsers")?a():e((function(e){f().then((function(t){e({type:"USERS/GET-USERS",users:t.data})})).catch((function(e){console.log(e.message)}))}))}),[]);var t=Object(u.c)((function(e){return e.users})),n=Object(u.c)((function(e){return e.allPosts})),s=Object(u.c)((function(e){return e.filteredPosts})),r=Object(u.c)((function(e){return e.comments})),o=Object(c.useCallback)(Object(p.a)((function(t){return e(t)}),500),[]);Object(c.useEffect)((function(){t.some((function(e){return e.isChecked}))?localStorage.setItem("localUsers",JSON.stringify(t)):localStorage.clear()}),[s]);var i=Object(p.a)((function(t){e(function(e){return function(t){b(e).then((function(e){t({type:"COMMENTS/GET-COMMENTS",comments:e.data})})).catch((function(e){console.log(e)}))}}(t))}),500),a=function(){var t=localStorage.getItem("localUsers");if(t){var n=JSON.parse(t);e(function(e){return{type:"USERS/GET-LOCAL-USERS",users:e}}(n)),n.forEach((function(t){return t.isChecked&&e(g(t.id))}))}};return Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)("div",{className:"mainBlock",children:[Object(T.jsxs)("div",{className:"postsBlock",children:[(0===n.length||t.some((function(e){return e.isChecked}))&&0===s.length)&&Object(T.jsx)(E.a,{color:"secondary"}),t.some((function(e){return e.isChecked}))?s.map((function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("li",{children:e.title}),Object(T.jsx)("div",{style:{background:"lightblue"},children:e.body}),Object(T.jsx)("button",{onClick:function(){return i(e.id)},children:"expand"}),Object(T.jsx)("div",{style:{background:"lightgray"},children:r.map((function(t){return t.postId===e.id?Object(T.jsxs)("p",{children:[" ",t.id," ",t.body]},t.id):""}))})]},e.id)})):n.map((function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("li",{children:e.title}),Object(T.jsx)("div",{style:{background:"lightblue"},children:e.body}),Object(T.jsx)("button",{onClick:function(){return i(e.id)},children:"expand"}),Object(T.jsx)("div",{style:{background:"lightgray"},children:r.map((function(t){return t.postId===e.id?Object(T.jsxs)("p",{children:[" ",t.id," ",t.body]},t.id):""}))})]},e.id)}))]}),Object(T.jsxs)("div",{className:"selectBlock",children:[Object(T.jsx)("div",{className:"selectTitle",children:"Select users to view their posts"}),Object(T.jsxs)("div",{className:"selectBody",children:[0===t.length&&Object(T.jsx)(E.a,{color:"secondary"}),t.map((function(t){return Object(T.jsxs)("div",{children:[Object(T.jsx)("input",{type:"checkbox",onChange:function(n){var c,s,r=n.currentTarget.checked;c=t.id,(s=r)?(e(S(c,s)),o(g(c))):(o({type:"FILTERED-POSTS/REMOVE-POSTS-BY-USER",userId:c}),e(S(c,s)))},checked:t.isChecked}),t.name]},t.id)}))]})]})]})})},m=n(17),x=n(36),y=Object(m.b)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS/GET-USERS":return t.users.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{isChecked:!1})}));case"USERS/CHANGE-USER-STATUS":return e.map((function(e){return e.id===t.id?Object(l.a)(Object(l.a)({},e),{},{isChecked:t.isChecked}):e}));case"USERS/GET-LOCAL-USERS":return Object(a.a)(t.users);default:return e}},allPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL-POSTS/GET-POSTS":return Object(a.a)(t.posts);default:return e}},filteredPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTERED-POSTS/GET-POSTS-BY-USER":return[].concat(Object(a.a)(e),Object(a.a)(t.posts));case"FILTERED-POSTS/REMOVE-POSTS-BY-USER":return e.filter((function(e){return e.userId!==t.userId}));default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COMMENTS/GET-COMMENTS":return Object(a.a)(t.comments);default:return e}}}),k=Object(m.c)(y,Object(m.a)(x.a));o.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(u.a,{store:k,children:Object(T.jsx)(v,{})})}),document.getElementById("root")),i()}},[[66,1,2]]]);
//# sourceMappingURL=main.c1570554.chunk.js.map